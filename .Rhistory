library(lubridate)
d <- all69khz_grouped
d2 <- d %>%
arrange(DateTimeUTC) %>%
mutate(detyear =
ifelse(
DateTimeUTC > "2011-07-01 00:00:00" & DateTimeUTC < "2012-06-30 00:00:00", "2011",
ifelse(
DateTimeUTC > "2012-07-01 00:00:00" & DateTimeUTC < "2013-06-30 00:00:00", "2012",
ifelse(
DateTimeUTC > "2013-07-01 00:00:00" & .$DateTimeUTC < "2014-06-30 00:00:00", "2013",
ifelse(
DateTimeUTC > "2014-07-01 00:00:00" & DateTimeUTC < "2015-06-30 00:00:00", "2014", "2015"
)
) )
library(tidyverse)
d2 <- d %>%
arrange(DateTimeUTC) %>%
mutate(detyear =
ifelse(
DateTimeUTC > "2011-07-01 00:00:00" & DateTimeUTC < "2012-06-30 00:00:00", "2011",
ifelse(
DateTimeUTC > "2012-07-01 00:00:00" & DateTimeUTC < "2013-06-30 00:00:00", "2012",
ifelse(
DateTimeUTC > "2013-07-01 00:00:00" & .$DateTimeUTC < "2014-06-30 00:00:00", "2013",
ifelse(
DateTimeUTC > "2014-07-01 00:00:00" & DateTimeUTC < "2015-06-30 00:00:00", "2014", "2015"
)
) )
d2 <- d2 %>%
group_by(TagID) %>%
filter(DateTimeUTC >= DateTagged) %>%
arrange(DateTimeUTC)
d3 <- d2 %>%
group_by(detyear, Sp) %>%
summarise(mindet = min(DateTimeUTC), maxdet = max(DateTimeUTC))
head(d3)
d3$resdays = d3$maxdet - d3$mindet
d3$percyear <- (as.numeric(d3$resdays)/365.25)*100
library(timevis)
head(d3)
?timevis
names(d3) <- c("detyear", "content", "start", "end", "resdays", "percyear")
d3$type <- 'range'
timevis(d3, showZoom = FALSE)
d3$type <- 'background'
timevis(d3, showZoom = FALSE)
d3$type <- 'box'
timevis(d3, showZoom = FALSE)
d3$type <- 'range'
d3$group <- ifelse(d3$Sp == "chn", "Chinook salmon", "white sturgeon")
timevis(d3, showZoom = FALSE)
names(d3) <- c("detyear", "Sp", "start", "end", "resdays", "percyear")
head(d3)
d3$type <- 'range'
d3 <- d2 %>%
group_by(detyear, Sp) %>%
summarise(mindet = min(DateTimeUTC), maxdet = max(DateTimeUTC))
head(d3)
d3$resdays = d3$maxdet - d3$mindet
d3$percyear <- (as.numeric(d3$resdays)/365.25)*100
head(d3)
names(d3) <- c("detyear", "Sp", "start", "end", "resdays", "percyear")
d3$type <- 'range'
d3$group <- ifelse(d3$Sp == "chn", "Chinook salmon", "white sturgeon")
d3 <- d3 %>%
group_by(detyear, Sp) %>%
mutate(content = n()) %>%
ungroup
head(d3)
d3 <- d3 %>%
group_by(detyear, Sp) %>%
mutate(content = length(Sp)) %>%
ungroup
head(d3)
d3 <- d2 %>%
group_by(detyear, Sp) %>%
mutate(content = n())
head(d3)
d3 <- d2 %>%
group_by(detyear, Sp) %>%
mutate(content = len(TagID))
head(d3)
tail(d3)
d3 <- d2 %>%
group_by(detyear, Sp) %>%
summarise(mindet = min(DateTimeUTC), maxdet = max(DateTimeUTC), content = len(TagID))
head(d3)
d3$resdays = d3$maxdet - d3$mindet
d3$percyear <- (as.numeric(d3$resdays)/365.25)*100
head(d3)
names(d3) <- c("detyear", "Sp", "start", "end", "content", "resdays", "percyear")
d3$type <- 'range'
d3$group <- ifelse(d3$Sp == "chn", "Chinook salmon", "white sturgeon")
timevis(d3, showZoom = FALSE)
timevis(d3, showZoom = FALSE, groups = d3$group)
groups <- as.data.frame(d3$group)
timevis(d3, showZoom = FALSE, groups = d3$group)
timevis(d3, showZoom = FALSE, groups = groups)
groups <- as.data.frame(id = d3$group, content = d3$content)
groups <- data.frame(id = d3$group, content = d3$content)
groups
timevis(d3, showZoom = FALSE, groups = groups)
groups <- data.frame(id = d3$group, content = d3$detyear)
timevis(d3, showZoom = FALSE, groups = groups)
timevis(d3, groups = groups)
head(d3)
timevis(d3)
viridis(2)
d3$style <- efelse(d3Sp == "chn", "color: '#440154FF'", "color: '#FDE725FF'")
d3$style <- ifelse(d3Sp == "chn", "color: '#440154FF'", "color: '#FDE725FF'")
d3$style <- ifelse(d3$Sp == "chn", "color: '#440154FF'", "color: '#FDE725FF'")
head(d3)
timevis(d3)
head(d3$style)
d3$style <- ifelse(d3$Sp == "chn", "color: #440154FF", "color: #FDE725FF")
groups <- data.frame(id = d3$group, content = d3$detyear)
timevis(d3)
d3$style <- ifelse(d3$Sp == "chn", "color: #440154FF, background: #f0f0f0", "color: #FDE725FF")
timevis(d3)
ggplot(d3) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "3 months", date_labels = "%b-%y")
d3 <- d2 %>%
group_by(detyear, Sp) %>%
summarise(mindet = min(DateTimeUTC), maxdet = max(DateTimeUTC))
head(d3)
d3$resdays = d3$maxdet - d3$mindet
d3$percyear <- (as.numeric(d3$resdays)/365.25)*100
ggplot(d3) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "3 months", date_labels = "%b-%y")
ggplot(d3) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear) +
scale_x_datetime(date_breaks = "3 months", date_labels = "%b-%y")
ggplot(d3) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear, scales = "free_x") +
scale_x_datetime(date_breaks = "3 months", date_labels = "%b-%y")
d3 %>%
filter(detyear != "2011")
ggplot(d3) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear, scales = "free_x") +
scale_x_datetime(date_breaks = "3 months", date_labels = "%b-%y")
d3 %>%
filter(detyear != "2011") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear, scales = "free_x") +
scale_x_datetime(date_breaks = "3 months", date_labels = "%b-%y")
d3 %>%
filter(detyear != "2011") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear) +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y")
?facet_wrap
?scale_x_datetime
d3 %>%
filter(detyear != "2011") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear) +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", date_minor_breaks = "4 months")
d3 %>%
filter(detyear != "2011") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear) +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(mindet - 30, maxdet + 30))
d3 %>%
filter(detyear != "2011") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear) +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(.$mindet - 30, .$maxdet + 30))
d3 %>%
filter(detyear != "2011") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
facet_wrap(~detyear) +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(d3$mindet - 30, d3$maxdet + 30))
d3 %>%
filter(detyear != "2011") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(d3$mindet - 30, d3$maxdet + 30))
d3 %>%
filter(detyear != "2011") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y")
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c("Aug-12", "Aug-13"))
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(mindet - 7, maxdet + 7))
d3 %>% filter(detyear == "2012") %>% summarise(start = mindet - 7)
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=5) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(as.POSIXct("2012-07-01"),
as.POSIXct("2013-06-01")))
?geom_segment
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(as.POSIXct("2012-07-01"),
as.POSIXct("2013-06-01")))
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(as.POSIXct("2012-07-01"),
as.POSIXct("2013-06-01"))) d3 %>%
filter(detyear == "2013") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(as.POSIXct("2013-07-01"),
as.POSIXct("2014-06-01")))
d3 %>%
filter(detyear == "2013") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(as.POSIXct("2013-07-01"),
as.POSIXct("2014-06-01")))
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(as.POSIXct("2012-07-01"),
as.POSIXct("2013-06-01"))) +
geom_theme(axis.text.y = element_blank(),
axis.ticks.y = element_blank()
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y", limits = c(as.POSIXct("2012-07-01"),
as.POSIXct("2013-06-01"))) +
geom_theme(axis.text.y = element_blank(),
axis.ticks.y = element_blank()
) +
labs(x = "Month", title = "2012-2013", y = " ")
head(d)
head(d3)
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y",
limits = c(as.POSIXct("2012-07-01"),as.POSIXct("2013-06-01"))) +
geom_theme(axis.text.y = element_blank(),
axis.ticks.y = element_blank()
) +
labs(x = "Month", title = "2012-2013", y = " ")
d3 %>%
filter(detyear == "2012") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y",
limits = c(as.POSIXct("2012-07-01"),as.POSIXct("2013-06-01"))) +
theme(axis.text.y = element_blank(),
axis.ticks.y = element_blank()
) +
labs(x = "Month", title = "2012-2013", y = " ")
d3 %>%
filter(detyear == "2013") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y",
limits = c(as.POSIXct("2013-07-01"), as.POSIXct("2014-06-01"))) +
theme(axis.text.y = element_blank(),
axis.ticks.y = element_blank()) +
labs(x = "Month", title = "2013 - 2014", y = " ")
d3 %>%
filter(detyear == "2014") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y",
limits = c(as.POSIXct("2014-07-01"), as.POSIXct("2015-06-01"))) +
theme(axis.text.y = element_blank(),
axis.ticks.y = element_blank()) +
labs(x = "Month", title = "2014 - 2015", y = " ")
d3 %>%
filter(detyear == "2015") %>%
ggplot(.) +
geom_segment(aes(x=mindet, xend=maxdet, y=Sp, yend=Sp, color = Sp), size=8,
lineend = "round", show.legend = FALSE) +
scale_color_viridis(discrete = TRUE, option = "D") +
scale_x_datetime(date_breaks = "2 months", date_labels = "%b-%y",
limits = c(as.POSIXct("2015-07-01"), as.POSIXct("2016-06-01"))) +
theme(axis.text.y = element_blank(),
axis.ticks.y = element_blank()) +
labs(x = "Month", title = "2015 - 2016", y = " ")
library(ybp)
library(fishtrackr)
library(tidyverse)
d <- all69khz_grouped
library(lubridate)
d <- all69khz_grouped
d2 <- d %>%
arrange(DateTimeUTC) %>%
mutate(detyear =
ifelse(
DateTimeUTC > "2011-07-01 00:00:00" & DateTimeUTC < "2012-06-30 00:00:00", "2011",
ifelse(
DateTimeUTC > "2012-07-01 00:00:00" & DateTimeUTC < "2013-06-30 00:00:00", "2012",
ifelse(
DateTimeUTC > "2013-07-01 00:00:00" & .$DateTimeUTC < "2014-06-30 00:00:00", "2013",
ifelse(
DateTimeUTC > "2014-07-01 00:00:00" & DateTimeUTC < "2015-06-30 00:00:00", "2014", "2015"
)
) )
d2 <- d2 %>%
group_by(TagID) %>%
filter(DateTimeUTC >= DateTagged) %>%
arrange(DateTimeUTC)
d2 <- d %>%
arrange(DateTimeUTC) %>%
mutate(detyear =
ifelse(
DateTimeUTC > "2011-07-01 00:00:00" & DateTimeUTC < "2012-06-30 00:00:00", "2011",
ifelse(
DateTimeUTC > "2012-07-01 00:00:00" & DateTimeUTC < "2013-06-30 00:00:00", "2012",
ifelse(
DateTimeUTC > "2013-07-01 00:00:00" & .$DateTimeUTC < "2014-06-30 00:00:00", "2013",
ifelse(
DateTimeUTC > "2014-07-01 00:00:00" & DateTimeUTC < "2015-06-30 00:00:00", "2014", "2015"
)
) )
d2 <- d %>%
arrange(DateTimeUTC) %>%
mutate(detyear =
ifelse(
DateTimeUTC > "2011-07-01 00:00:00" & DateTimeUTC < "2012-06-30 00:00:00", "2011",
ifelse(
DateTimeUTC > "2012-07-01 00:00:00" & DateTimeUTC < "2013-06-30 00:00:00", "2012",
ifelse(
DateTimeUTC > "2013-07-01 00:00:00" & .$DateTimeUTC < "2014-06-30 00:00:00", "2013",
ifelse(
DateTimeUTC > "2014-07-01 00:00:00" & DateTimeUTC < "2015-06-30 00:00:00", "2014", "2015"
)
) )
d2 <- d2 %>%
group_by(TagID) %>%
filter(DateTimeUTC >= DateTagged) %>%
ungroup() %>%
arrange(DateTimeUTC)
fl <- d2 %>%
group_by(TagID) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)],
firstdate = DateTimeUTC[DateTimeUTC == min(DateTimeUTC)],
lastdate = DateTimeUTC[DateTimeUTC == max(DateTimeUTC)])
fl <- d2 %>%
group_by(detyear, TagID) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)],
firstdate = DateTimeUTC[DateTimeUTC == min(DateTimeUTC)],
lastdate = DateTimeUTC[DateTimeUTC == max(DateTimeUTC)])
head(d2)
fl <- d2 %>%
group_by(detyear, TagID) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)],
firstdate = DateTimeUTC[DateTimeUTC == min(DateTimeUTC)],
lastdate = DateTimeUTC[DateTimeUTC == max(DateTimeUTC)])
fl <- d2 %>%
group_by(TagID, detyear) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)],
firstdate = DateTimeUTC[DateTimeUTC == min(DateTimeUTC)],
lastdate = DateTimeUTC[DateTimeUTC == max(DateTimeUTC)])
fl <- d2 %>%
group_by(TagID, detyear) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
?split
fl <- split(d2, detyear)
fl <- split(d2, as.factor(d2$detyear))
head(fl)
fl11 <- fl$`2011` %>%
group_by(TagID, detyear) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
head(fl11)
fl11 %>%
group_by(last) %>%
summarise(loc = n())
range(fl$`2011`$DateTimeUTC)
fl11 %>%
group_by(last) %>%
summarise(loc = n())
fl11 <- fl$`2011` %>%
group_by(TagID) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
fl11 %>%
group_by(last) %>%
summarise(loc = n()) %>%
ggplot(aes()
fl11 %>%
group_by(last) %>%
summarise(loc = n())
fl12 <- fl$`2012` %>%
group_by(Sp, TagID) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
fl12 <- fl$`2012` %>%
group_by(Sp) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
fl12 %>%
group_by(last) %>%
summarise(loc = n())
fl12wst <- fl$`2012` %>%
filter(Sp == "wst") %>%
group_by(TagID) %>%
arrange(DateTimeUTC) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
fl12wst <- fl$`2012` %>%
filter(Sp == "wst") %>%
group_by(TagID) %>%
arrange(DateTimeUTC) %>%
filter(!duplicated(DateTimeUTC)) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
fl12 %>%
group_by(last) %>%
summarise(loc = n())
fl12wst %>%
group_by(last) %>%
summarise(loc = n())
fl12chn <- fl$`2012` %>%
filter(Sp == "chn") %>%
group_by(TagID) %>%
arrange(DateTimeUTC) %>%
filter(!duplicated(DateTimeUTC)) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
fl12chn %>%
group_by(last) %>%
summarise(loc = n())
d2 %>%
group_by(detyear, Sp) %>%
summarise(nfish = len(TagID))
fl13wst <- fl$`2013` %>%
filter(Sp == "wst") %>%
group_by(TagID) %>%
arrange(DateTimeUTC) %>%
filter(!duplicated(DateTimeUTC)) %>%
summarise(first = Station[DateTimeUTC == min(DateTimeUTC)],
last = Station[DateTimeUTC == max(DateTimeUTC)])
fl13wst %>%
group_by(last) %>%
summarise(loc = n())
